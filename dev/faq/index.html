<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>❓ FAQ · ConformalPrediction.jl</title><meta name="title" content="❓ FAQ · ConformalPrediction.jl"/><meta property="og:title" content="❓ FAQ · ConformalPrediction.jl"/><meta property="twitter:title" content="❓ FAQ · ConformalPrediction.jl"/><meta name="description" content="Documentation for ConformalPrediction.jl."/><meta property="og:description" content="Documentation for ConformalPrediction.jl."/><meta property="twitter:description" content="Documentation for ConformalPrediction.jl."/><meta property="og:url" content="https://juliatrustworthyai.github.io/ConformalPrediction.jl/faq/"/><meta property="twitter:url" content="https://juliatrustworthyai.github.io/ConformalPrediction.jl/faq/"/><link rel="canonical" href="https://juliatrustworthyai.github.io/ConformalPrediction.jl/faq/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="ConformalPrediction.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">ConformalPrediction.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">🏠 Home</a></li><li><span class="tocitem">🫣 Tutorials</span><ul><li><a class="tocitem" href="../tutorials/">Overview</a></li><li><a class="tocitem" href="../tutorials/classification/">Classification</a></li><li><a class="tocitem" href="../tutorials/regression/">Regression</a></li></ul></li><li><span class="tocitem">🫡 How-To Guides</span><ul><li><a class="tocitem" href="../how_to_guides/">Overview</a></li><li><a class="tocitem" href="../how_to_guides/mnist/">How to Conformalize a Deep Image Classifier</a></li><li><a class="tocitem" href="../how_to_guides/llm/">How to Conformalize a Large Language Model</a></li><li><a class="tocitem" href="../how_to_guides/timeseries/">How to Conformalize a Time Series Model</a></li></ul></li><li><span class="tocitem">🤓 Explanation</span><ul><li><a class="tocitem" href="../explanation/">Overview</a></li><li><a class="tocitem" href="../explanation/architecture/">Package Architecture</a></li><li><a class="tocitem" href="../explanation/finite_sample_correction/">Finite-sample Correction</a></li></ul></li><li><a class="tocitem" href="../reference/">🧐 Reference</a></li><li><a class="tocitem" href="../contribute/">🛠 Contribute</a></li><li class="is-active"><a class="tocitem" href>❓ FAQ</a><ul class="internal"><li><a class="tocitem" href="#Package"><span>Package</span></a></li><li><a class="tocitem" href="#Methodology"><span>Methodology</span></a></li><li><a class="tocitem" href="#References"><span>References</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>❓ FAQ</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>❓ FAQ</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/juliatrustworthyai/ConformalPrediction.jl/blob/main/docs/src/faq.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Frequently-Asked-Questions"><a class="docs-heading-anchor" href="#Frequently-Asked-Questions">Frequently Asked Questions</a><a id="Frequently-Asked-Questions-1"></a><a class="docs-heading-anchor-permalink" href="#Frequently-Asked-Questions" title="Permalink"></a></h1><p>In this section we attempt to provide some reflections on frequently asked questions about the package and implemented methodologies. If you have a particular question that is not listed here, please feel free to also open an issue. While can answer questions regarding the package with a certain degree of confidence, I <strong>do not pretend</strong> to have any definite answers to methodological questions, but merely reflections (see the disclaimer below).</p><h2 id="Package"><a class="docs-heading-anchor" href="#Package">Package</a><a id="Package-1"></a><a class="docs-heading-anchor-permalink" href="#Package" title="Permalink"></a></h2><h3 id="Why-the-interface-to-MLJ.jl?"><a class="docs-heading-anchor" href="#Why-the-interface-to-MLJ.jl?">Why the interface to <code>MLJ.jl</code>?</a><a id="Why-the-interface-to-MLJ.jl?-1"></a><a class="docs-heading-anchor-permalink" href="#Why-the-interface-to-MLJ.jl?" title="Permalink"></a></h3><p>An important design choice. <code>MLJ.jl</code> is a one-stop shop for common machine learning models and pipelines in Julia. It’s growing fast and the development team is very accessible, friendly and enthusiastic. Conformal Prediction is a model-agnostic approach to uncertainty quantification, so it can be applied to any common (supervised) machine learning model. For these reasons I decided to interface this package to <code>MLJ.jl</code>. The idea is that any (supervised) <code>MLJ.jl</code> model can be conformalized using <code>ConformalPrediction.jl</code>. By leveraging existing <code>MLJ.jl</code> functionality for common tasks like training, prediction and model evaluation, this package is light-weight and scalable.</p><h2 id="Methodology"><a class="docs-heading-anchor" href="#Methodology">Methodology</a><a id="Methodology-1"></a><a class="docs-heading-anchor-permalink" href="#Methodology" title="Permalink"></a></h2><p>For methodological questions about Conformal Prediction, my best advice is to consult the literature on the topic. A good place to start is <a href="https://arxiv.org/pdf/2107.07511.pdf">“A Gentle Introduction to Conformal Prediction and Distribution-Free Uncertainty Quantification”</a> (Angelopoulos and Bates 2021): the tutorial is comprehensive, accessible and continuously updated. Below you will find a list of high-level questions and reflections.</p><div class="admonition is-warning"><header class="admonition-header">Disclaimer</header><div class="admonition-body"></div></div><p>    I want to emphasize that these are merely my own <strong>reflections</strong>. I provide these to the best of my knowledge and understanding of the topic, but please be aware that I am still on a learning journey myself. I have not read the entire literature on this topic (and won’t be able to in the future either). If you spot anything that doesn’t look right or sits at odds with something your read in the literature, please open an issue. Even better: if you want to add your own reflections and thoughts, feel free to open a pull request.</p><h3 id="What-is-Predictive-Uncertainty-Quantification?"><a class="docs-heading-anchor" href="#What-is-Predictive-Uncertainty-Quantification?">What is Predictive Uncertainty Quantification?</a><a id="What-is-Predictive-Uncertainty-Quantification?-1"></a><a class="docs-heading-anchor-permalink" href="#What-is-Predictive-Uncertainty-Quantification?" title="Permalink"></a></h3><p>Predictive Uncertainty Quantification deals with quantifying the uncertainty around predictions for the output variable of a supervised model. It is a subset of Uncertainty Quantification, which can also relate to uncertainty around model parameters, for example. I will sometimes use both terms interchangeably, even though I shouldn’t (please bare with me, or if you’re bothered by a particular slip-up, open a PR).</p><p>Uncertainty of model parameters is a very important topic itself: we might be interested in understanding, for example, if the estimated effect <em>θ</em> of some input variable <em>x</em> on the output variable <em>y</em> is statistically significant. This typically hinges on being able to quantify the uncertainty around the parameter <em>θ</em>. This package does not offer this sort of functionality. I have so far not come across any work on Conformal Inference that deals with parameter uncertainty, but I also haven’t properly looked for it.</p><h3 id="What-is-the-(marginal)-coverage-guarantee?"><a class="docs-heading-anchor" href="#What-is-the-(marginal)-coverage-guarantee?">What is the (marginal) coverage guarantee?</a><a id="What-is-the-(marginal)-coverage-guarantee?-1"></a><a class="docs-heading-anchor-permalink" href="#What-is-the-(marginal)-coverage-guarantee?" title="Permalink"></a></h3><p>The (marginal) coverage guarantee states that:</p><blockquote><p>[…] the probability that the prediction set contains the correct label [for a fresh test point from the same distribution] is almost exactly 1 − <em>α</em>.</p><p>— Angelopoulos and Bates (2021)</p></blockquote><p>See Angelopoulos and Bates (2021) for a formal proof of this property or check out this <a href="https://www.paltmeyer.com/blog/posts/conformal-regression/#evaluation">section</a> or <code>Pluto.jl</code> 🎈 <a href="https://binder.plutojl.org/v0.19.12/open?url=https%253A%252F%252Fraw.githubusercontent.com%252Fpat-alt%252FConformalPrediction.jl%252Fmain%252Fdocs%252Fpluto%252Fintro.jl">notebook</a> to convince yourself through a small empirical exercise. Note that this property relates to a special case of conformal prediction, namely Split Conformal Prediction (Angelopoulos and Bates 2021).</p><h3 id="What-does-marginal-mean-in-this-context?"><a class="docs-heading-anchor" href="#What-does-marginal-mean-in-this-context?">What does marginal mean in this context?</a><a id="What-does-marginal-mean-in-this-context?-1"></a><a class="docs-heading-anchor-permalink" href="#What-does-marginal-mean-in-this-context?" title="Permalink"></a></h3><p>The property is “marginal” in the sense that the probability is averaged over the randomness in the data (Angelopoulos and Bates 2021). Depending on the size of the calibration set (context: Split Conformal Prediction), the realized coverage or estimated empirical coverage may deviate slightly from the user specified value 1 − <em>α</em>. To get a sense of this effect, you may want to check out this <code>Pluto.jl</code> 🎈 <a href="https://binder.plutojl.org/v0.19.12/open?url=https%253A%252F%252Fraw.githubusercontent.com%252Fpat-alt%252FConformalPrediction.jl%252Fmain%252Fdocs%252Fpluto%252Fintro.jl">notebook</a>: it allows you to adjust the calibration set size and check the resulting empirical coverage. See also Section 3 of Angelopoulos and Bates (2021).</p><h3 id="Is-CP-really-distribution-free?"><a class="docs-heading-anchor" href="#Is-CP-really-distribution-free?">Is CP really distribution-free?</a><a id="Is-CP-really-distribution-free?-1"></a><a class="docs-heading-anchor-permalink" href="#Is-CP-really-distribution-free?" title="Permalink"></a></h3><p>The marginal coverage property holds under the assumption that the input data is exchangeable, which is a minimal distributional assumption. So, in my view, the short answer to this question is “No”. I believe that when people use the term “distribution-free” in this context, they mean that no prior assumptions are being made about the actual form or family of distribution(s) that generate the model parameters and data. If we define “distribution-free” in this sense, then the answer to me seems “Yes”.</p><h3 id="What-happens-if-this-minimal-distributional-assumption-is-violated?"><a class="docs-heading-anchor" href="#What-happens-if-this-minimal-distributional-assumption-is-violated?">What happens if this minimal distributional assumption is violated?</a><a id="What-happens-if-this-minimal-distributional-assumption-is-violated?-1"></a><a class="docs-heading-anchor-permalink" href="#What-happens-if-this-minimal-distributional-assumption-is-violated?" title="Permalink"></a></h3><p>Then the marginal coverage property does not hold. See <a href="https://www.paltmeyer.com/blog/posts/conformal-regression/#are-we-done">here</a> for an example.</p><h3 id="What-are-set-valued-predictions?"><a class="docs-heading-anchor" href="#What-are-set-valued-predictions?">What are set-valued predictions?</a><a id="What-are-set-valued-predictions?-1"></a><a class="docs-heading-anchor-permalink" href="#What-are-set-valued-predictions?" title="Permalink"></a></h3><p>This should be clearer after reading through some of the other tutorials and explanations. For conformal classifiers of type <code>ConformalProbabilisticSet</code>, predictions are set-valued: these conformal classifiers may return multiple labels, a single label or no labels at all. Larger prediction sets indicate higher predictive uncertainty: for sets of size greater than one the conformal predictor cannot with certainty narrow down its prediction down to a single label, so it returns all labels that meet the specified marginal coverage.</p><h3 id="How-do-I-interpret-the-distribution-of-set-size?"><a class="docs-heading-anchor" href="#How-do-I-interpret-the-distribution-of-set-size?">How do I interpret the distribution of set size?</a><a id="How-do-I-interpret-the-distribution-of-set-size?-1"></a><a class="docs-heading-anchor-permalink" href="#How-do-I-interpret-the-distribution-of-set-size?" title="Permalink"></a></h3><p>It can be useful to plot the distribution of set sizes in order to visually asses how adaptive a conformal predictor is. For more adaptive predictors the distribution of set sizes is typically spread out more widely, which reflects that “the procedure is effectively distinguishing between easy and hard inputs” (Angelopoulos and Bates 2021). This is desirable: when for a given sample it is difficult to make predictions, this should be reflected in the set size (or interval width in the regression case). Since ‘difficult’ lies on some spectrum that ranges from ‘very easy’ to ‘very difficult’ the set size should very across the spectrum of ‘empty set’ to ‘all labels included’.</p><h3 id="What-is-aleatoric-uncertainty?-What-is-epistemic-uncertainty?"><a class="docs-heading-anchor" href="#What-is-aleatoric-uncertainty?-What-is-epistemic-uncertainty?">What is aleatoric uncertainty? What is epistemic uncertainty?</a><a id="What-is-aleatoric-uncertainty?-What-is-epistemic-uncertainty?-1"></a><a class="docs-heading-anchor-permalink" href="#What-is-aleatoric-uncertainty?-What-is-epistemic-uncertainty?" title="Permalink"></a></h3><p>Loosely speaking: aleatoric uncertainty relates to uncertainty that cannot be “learned away” by observing more data (think points near the decision boundary); epistemic uncertainty relates to uncertainty that can be “learned away” by observing more data.</p><h2 id="References"><a class="docs-heading-anchor" href="#References">References</a><a id="References-1"></a><a class="docs-heading-anchor-permalink" href="#References" title="Permalink"></a></h2><p>Angelopoulos, Anastasios N., and Stephen Bates. 2021. “A Gentle Introduction to Conformal Prediction and Distribution-Free Uncertainty Quantification.” <a href="https://arxiv.org/abs/2107.07511">https://arxiv.org/abs/2107.07511</a>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../contribute/">« 🛠 Contribute</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.1.2 on <span class="colophon-date" title="Friday 8 March 2024 14:29">Friday 8 March 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
